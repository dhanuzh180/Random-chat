<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sky Chat</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body class="chat-page">

  <!-- Header -->
  <header class="chat-header">
    <h2>Sky Chat</h2>
    <button onclick="handleLogout()" class="btn-logout">Logout</button>
  </header>

  <!-- Home Screen -->
  <div id="homeScreen" class="home-screen">
    <div class="welcome-box">
      <h1>Welcome to Sky Chat!</h1>
      <p class="welcome-text">Connect with random people or invite your friends</p>

      <button onclick="startRandomChat()" class="btn btn-primary btn-large">
        Start Random Chat
      </button>

      <div class="divider">
        <span>OR</span>
      </div>

      <button onclick="showInviteOptions()" class="btn btn-secondary btn-large">
        Invite a Friend
      </button>
    </div>
  </div>

  <!-- Invite Options Modal -->
  <div id="inviteModal" class="modal hidden">
    <div class="modal-content">
      <h3>Invite a Friend</h3>

      <div class="invite-section">
        <button onclick="createChatCode()" class="btn btn-primary">Generate Chat Code</button>
        <div id="generatedCode" class="generated-code hidden">
          <p>Share this code:</p>
          <div class="code-display" id="codeDisplay"></div>
          <button onclick="copyCode()" class="btn btn-small">Copy Code</button>
        </div>
      </div>

      <div class="divider"><span>OR</span></div>

      <div class="invite-section">
        <input type="text" id="joinCodeInput" placeholder="Enter chat code" class="auth-input" />
        <button onclick="joinWithCode()" class="btn btn-secondary">Join Chat</button>
      </div>

      <button onclick="closeInviteModal()" class="btn btn-text">Cancel</button>
    </div>
  </div>

  <!-- Chat Screen -->
  <div id="chatScreen" class="chat-screen hidden">
    <div class="chat-info">
      <span id="chatStatus">Connected</span>
      <button onclick="leaveChat()" class="btn-leave">Leave Chat</button>
    </div>

    <div id="messagesContainer" class="messages-container"></div>

    <div class="message-input-bar">
      <input
        type="text"
        id="messageInput"
        placeholder="Type a message..."
        class="message-input"
        onkeypress="handleKeyPress(event)"
      />
      <button onclick="sendMessage()" class="btn-send">Send</button>
    </div>
  </div>

  <!-- Loading Overlay -->
  <div id="loadingOverlay" class="loading-overlay hidden">
    <div class="loading-spinner"></div>
    <p id="loadingText">Finding someone to chat with...</p>
    <button onclick="cancelMatching()" class="btn btn-secondary">Cancel</button>
  </div>

  <script type="module" src="main.js"></script>
</body>
</html>
